# AGENTS.md

> **This file guides AI agents and LLMs working on the K9 monorepo.**

## Project Overview

- **K9** is a monorepo for "running agents everywhere"
- Uses **pnpm workspaces** and **Turborepo** for orchestration
- **Apps**:
  - `apps/www`: TanStack Start React app
  - `apps/sandbox`: Cloudflare Worker
- **Packages**:
  - `packages/ui`: Shared component library (`@repo/ui`)
  - `packages/typescript-config`: Shared TS configs (`@repo/typescript-config`)

## Tooling (IMPORTANT)

- **Linting**: **oxlint** with type-aware linting (NOT eslint, NOT biome)
- **Formatting**: **oxfmt** (NOT prettier, NOT biome)
- **Fixing**:
  - Run `pnpm lint:fix` to auto-fix safe issues
  - Run `pnpm lint:fix-unsafe` to auto-fix all issues (including dangerous fixes)
  - Run `pnpm format` to format all files

## Key Commands

| Command | Purpose |
| ------- | ------- |
| `pnpm dev:www` | Start www app (port 3000) + Convex |
| `pnpm dev:sandbox` | Start sandbox worker |
| `pnpm lint` | Lint with oxlint (type-aware) |
| `pnpm lint:fix` | Auto-fix safe lint issues |
| `pnpm lint:fix-unsafe` | Auto-fix all issues (dangerous) |
| `pnpm format` | Format with oxfmt |
| `pnpm format:check` | Check formatting without writing |
| `pnpm check-types` | TypeScript check all packages |
| `pnpm build` | Build all packages |

## Tech Stack

- **Frontend**: TanStack Start (React 19, file-based routing)
- **Backend**: Convex (real-time DB + serverless functions)
- **Auth**: WorkOS
- **Styling**: Tailwind CSS v4, OKLCH colors
- **UI Components**: @base-ui/react primitives + CVA variants
- **Deployment**: Cloudflare Workers/Pages

## Code Conventions

- **TypeScript**: Strict mode everywhere
- **Routing**: File-based in `apps/www/src/routes/`
- **Generated Files**:
  - `routeTree.gen.ts` (Auto-generated by TanStack Router) - **DO NOT EDIT**
  - `convex/_generated/` (Auto-generated by Convex) - **DO NOT EDIT**
- **Imports**: Use workspace imports (e.g., `@repo/ui/components/button`)

## What NOT to Do

- **No ESLint/Prettier/Biome**: Use oxlint + oxfmt only
- **No Editing Generated Files**: `routeTree.gen.ts`, `convex/_generated/*`
- **No `@ts-ignore` / `as any`**: Fix the types properly

## Ignoring Lint Rules

Use `oxlint-disable-next-line` comments to suppress specific rules:

```ts
// oxlint-disable-next-line jsx-a11y/label-has-associated-control
<label {...props} />
```
